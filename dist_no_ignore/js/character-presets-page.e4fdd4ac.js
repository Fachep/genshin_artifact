"use strict";(self["webpackChunkgenshin_artifacts"]=self["webpackChunkgenshin_artifacts"]||[]).push([[726],{22254:function(e,t,a){a.r(t),a.d(t,{default:function(){return $}});var n=a(79509),l=(a(3905),a(28785)),o=(a(9638),a(77049)),r=(a(7739),a(8350)),c=(a(12573),a(75915),a(33948),a(38862),a(74916),a(15306),a(10311)),i=a(48243),s=a(65579),u=a(59e3),d=a(83549),m=a(62641),f=a(98505),p=a(53355),v=a(85081),N=a(90871),k=a(9012);const V={class:"header"},g={class:"fs-12"},y={key:0,class:"buttons flex-row"},C={class:"body"},h={class:"detail-div fs-12"},w=["src"],x={class:"detail-div fs-12"},E=["src"],B={class:"detail-div fs-12"},_=["src"];var b=(0,c.defineComponent)({__name:"PresetItem",props:{item:null,name:{default:"name"},toolbar:{type:Boolean,default:!0},calculateIcon:{type:Boolean,default:!0}},setup(e){const t=e,{t:a,ta:n}=(0,k.QT)(),l=(0,c.computed)((()=>t.item.character.name)),r=(0,c.computed)((()=>m.O[l.value].nameLocale)),i=(0,c.computed)((()=>{const e=m.O[l.value];return e.avatar})),s=((0,c.computed)((()=>{const e=m.O[l.value];return e.chs})),(0,c.computed)((()=>f.G[t.item.weapon.name]))),u=(0,c.computed)((()=>s.value.nameLocale)),d=(0,c.computed)((()=>p.F[t.item.targetFunction.name])),b=(0,c.computed)((()=>d.value.nameLocale));return(l,m)=>{const f=o.mi;return(0,c.openBlock)(),(0,c.createElementBlock)("div",{class:"item br-3",onClick:m[2]||(m[2]=e=>l.$emit("click"))},[(0,c.createElementVNode)("div",V,[(0,c.createElementVNode)("span",g,(0,c.toDisplayString)(t.name),1),e.toolbar?((0,c.openBlock)(),(0,c.createElementBlock)("div",y,[(0,c.createVNode)(f,{icon:(0,c.unref)(N.Z),text:"",size:"small",circle:"",onClick:m[0]||(m[0]=(0,c.withModifiers)((e=>l.$emit("delete")),["stop"])),class:"button",title:(0,c.unref)(a)("misc.del")},null,8,["icon","title"]),(0,c.createVNode)(f,{icon:(0,c.unref)(v.Z),text:"",size:"small",circle:"",onClick:m[1]||(m[1]=(0,c.withModifiers)((e=>l.$emit("download")),["stop"])),class:"button",title:(0,c.unref)(a)("misc.export")},null,8,["icon","title"])])):(0,c.createCommentVNode)("",!0)]),(0,c.createElementVNode)("div",C,[(0,c.createElementVNode)("div",h,[(0,c.createElementVNode)("img",{src:(0,c.unref)(i),class:"c-avatar br-50p"},null,8,w),(0,c.createElementVNode)("span",null,(0,c.toDisplayString)((0,c.unref)(n)((0,c.unref)(r))),1)]),(0,c.createElementVNode)("div",x,[(0,c.createElementVNode)("img",{src:(0,c.unref)(s).url,class:"w-avatar br-50p"},null,8,E),(0,c.createElementVNode)("span",null,(0,c.toDisplayString)((0,c.unref)(n)((0,c.unref)(u))),1)]),(0,c.createElementVNode)("div",B,[(0,c.createElementVNode)("img",{src:(0,c.unref)(d).badge,class:"tf-avatar br-50p"},null,8,_),(0,c.createElementVNode)("span",null,(0,c.toDisplayString)((0,c.unref)(n)((0,c.unref)(b))),1)])])])}}}),D=a(83744);const S=(0,D.Z)(b,[["__scopeId","data-v-20745768"]]);var O=S,P=a(68899),T=a(64055),Z=a(24988);const z={class:"toolbar"},F={key:0,class:"body"},I={style:{"font-size":"0.9em",color:"#606266"}};var L=(0,c.defineComponent)({__name:"CharacterPresetsPage",setup(e){const{t:t}=(0,k.QT)(),a=(0,T.B)(),m=(0,i.useRouter)(),f=(0,c.ref)(!1),p=(0,c.ref)(null);function N(){f.value=!0}async function V(){if(!p.value)return;const e=await p.value.getReadPromise();let l=null;try{l=JSON.parse(e)}catch(r){l=null}const o=(0,s.mf)(l);if(o){for(let e of l)a.addOrOverwrite(e.name,e.item);f.value=!1}else(0,n.z8)({message:t("presetPage.wrongFormat"),type:"error"})}function g(e){const t=a.presets.value[e],n=[t],l=JSON.stringify(n);(0,u.Qz)(l,"text/plain",e)}function y(){const e=JSON.stringify(a.allFlat.value);(0,u.Qz)(e,"text/plain",t("misc.preset"))}const C=a.allFlat,h=(0,c.computed)((()=>C.value.length));function w(e){a.deletePreset(e)}function x(e){m.push({name:"calculate",params:{presetName:e}})}return(e,a)=>{const n=o.mi,i=r.d0,s=o.MO,u=l.GT;return(0,c.openBlock)(),(0,c.createElementBlock)("div",null,[(0,c.createVNode)(i,{modelValue:f.value,"onUpdate:modelValue":a[1]||(a[1]=e=>f.value=e),title:(0,c.unref)(t)("misc.import"),width:(0,c.unref)(d.B)?"60%":"90%"},{footer:(0,c.withCtx)((()=>[(0,c.createVNode)(n,{onClick:a[0]||(a[0]=e=>f.value=!1)},{default:(0,c.withCtx)((()=>[(0,c.createTextVNode)((0,c.toDisplayString)((0,c.unref)(t)("misc.cancel")),1)])),_:1}),(0,c.createVNode)(n,{type:"primary",onClick:V},{default:(0,c.withCtx)((()=>[(0,c.createTextVNode)((0,c.toDisplayString)((0,c.unref)(t)("misc.confirm")),1)])),_:1})])),default:(0,c.withCtx)((()=>[(0,c.createVNode)((0,c.unref)(P.Z),{ref_key:"fileImportBlock",ref:p},null,512)])),_:1},8,["modelValue","title","width"]),(0,c.createElementVNode)("div",z,[(0,c.createVNode)(s,null,{default:(0,c.withCtx)((()=>[(0,c.createVNode)(n,{icon:(0,c.unref)(v.Z),onClick:y},{default:(0,c.withCtx)((()=>[(0,c.createTextVNode)((0,c.toDisplayString)((0,c.unref)(t)("presetPage.exportAll")),1)])),_:1},8,["icon"]),(0,c.createVNode)(n,{icon:(0,c.unref)(Z.Z),onClick:N},{default:(0,c.withCtx)((()=>[(0,c.createTextVNode)((0,c.toDisplayString)((0,c.unref)(t)("misc.import")),1)])),_:1},8,["icon"])])),_:1})]),(0,c.unref)(h)>0?((0,c.openBlock)(),(0,c.createElementBlock)("div",F,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)((0,c.unref)(C),(e=>((0,c.openBlock)(),(0,c.createBlock)(O,{item:e.item,name:e.name,"calculate-icon":!1,onDelete:t=>w(e.name),onDownload:t=>g(e.name),class:"item",onClick:t=>x(e.name)},null,8,["item","name","onDelete","onDownload","onClick"])))),256))])):((0,c.openBlock)(),(0,c.createBlock)(u,{key:1},{default:(0,c.withCtx)((()=>[(0,c.createElementVNode)("p",I,[(0,c.createTextVNode)((0,c.toDisplayString)((0,c.unref)(t)("presetPage.go")),1),(0,c.createElementVNode)("span",{class:"route-item",onClick:a[2]||(a[2]=t=>e.$router.replace("/calculate"))},(0,c.toDisplayString)((0,c.unref)(t)("misc.calculator")),1),(0,c.createTextVNode)((0,c.toDisplayString)((0,c.unref)(t)("presetPage.toCalc")),1)])])),_:1}))])}}});const Q=(0,D.Z)(L,[["__scopeId","data-v-56bc9e93"]]);var $=Q}}]);